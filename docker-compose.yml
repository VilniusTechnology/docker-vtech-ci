# PHP
phpfpm:
  restart: always
  image: php:7.0.2-fpm
  # image: php:5.6.17-fpm
  volumes:
    # - ./php-fpm-7/php-fpm.conf:/usr/local/etc/php-fpm.conf
    # - ./php-fpm-7/php.ini:/usr/local/etc/php/php.ini
    - ./app:/var/www/html
    - ./log/php-fpm:/var/log/php-fpm
  links:
    - db:db
    - es:es
# NGINX
nginx:
  restart: always
  image: nginx
  ports:
    - "80:80"
  links:
    - phpfpm:phpfpm
  volumes:
    - ./nginx/vhost.conf:/etc/nginx/conf.d/default.conf
    - ./app:/var/www/html
    - ./log/nginx:/var/log/nginx
# MYSQL
db:
  restart: always
  image: mysql
  ports:
    - "3306:3306"
  environment:
    MYSQL_ROOT_PASSWORD: 123456
    MYSQL_USER: user
    MYSQL_PASSWORD: password
    MYSQL_DATABASE: database
  volumes:
    - ./mysql/databases:/var/lib/mysql
    - ./log/mysql:/var/log/mysql
es:
  image: elasticsearch:2.1.1
  ports:
    - "9200:9200"
  # volumes:
    # - ./es:/usr/share/elasticsearch/data
pma:
  image: phpmyadmin/phpmyadmin
  ports:
    - "8080:8080"